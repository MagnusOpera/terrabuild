[<export>] let dispatch (context: { Command: string }) (variables: string map option) (args: string option) =
  let varsCount =
    variables
    |> Option.map Map.count
    |> Option.defaultValue 0

  let argsValue = args |> Option.defaultValue "<none>"

  $"{context.Command}|{varsCount}|{argsValue}"

type ExportFlag =
  | Dispatch
  | Default
  | Batchable
  | Never
  | Local
  | External
  | Remote

Map.ofList [(nameof dispatch, [Dispatch])]
